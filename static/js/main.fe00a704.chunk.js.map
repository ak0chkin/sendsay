{"version":3,"sources":["components/SendingForm/Field/index.js","constants/actionTypes.js","utils/validateFile.js","components/SendingForm/Attachments/index.js","components/SendingForm/DragZone/index.js","components/SendingForm/validate.js","components/SendingForm/index.js","components/Messages/index.js","components/App/logo.svg","services/sendsayAPI.js","components/App/index.js","reportWebVitals.js","reducer.js","reducers/attachment.js","reducers/message.js","store.js","index.js"],"names":["renderField","input","tag","label","placeholder","position","meta","asyncValidating","touched","error","className","rows","ADD_ATTACHMENT","DELETE_ATTACHMENT","WIPE_ATTACHMENTS","ADD_MESSAGE","UPDATE_STATUS","file","indexOf","type","size","Attachments","props","handleAttach","bind","handleDelete","e","attachment","target","files","validateFile","reader","FileReader","readAsDataURL","onload","addAttachmentAction","name","result","this","deleteAttachmentAction","attachments","attaches","map","item","onClick","length","htmlFor","id","onChange","React","Component","connect","state","dispatch","payload","addAttachment","deleteAttachment","DragZone","hidden","dragEnter","dragOver","dragLeave","fileDrop","document","getElementById","parentElement","addEventListener","removeEventListener","preventDefault","setState","dataTransfer","onDragOver","onDragLeave","onDrop","emailRegex","validate","values","errors","test","wipeAttachmentsAction","handleSubmit","onSubmit","render","form","submitting","pristine","event","then","restart","component","Messages","messages","date","toDateString","subject","status","trackId","table","message","sendsay","Sendsay","apiKey","issueSendTest","fields","a","requestBody","console","log","request","response","trackGet","obj","Promise","resolve","setTimeout","App","data","addMessageAction","Date","updateStatusAction","src","logo","alt","addMessage","updateStatus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","combineReducers","action","filter","store","createStore","reducer","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.fe00a704.chunk.js","sourcesContent":["import React from 'react';\r\nimport './index.css';\r\n\r\nexport const renderField = (\r\n    {input, tag, label, placeholder, position, meta: {asyncValidating, touched, error}}\r\n) => (\r\n    <div className=\"input-group\">\r\n        <label className=\"input-group__label\">{label}</label>\r\n        <div className={asyncValidating ? 'async-validating' : ''}>\r\n            {tag === 'input'\r\n                ? <input {...input} placeholder={placeholder}\r\n                         className={`input-group__field input-group__field_input ${position ? position : ''}`}/>\r\n                : <textarea {...input} placeholder={placeholder}\r\n                            className={`input-group__field input-group__field_textarea ${position ? position : ''}`}\r\n                            rows=\"3\"/>\r\n            }\r\n            {touched && error && <span className=\"input-group__error\">{error}</span>}\r\n        </div>\r\n    </div>\r\n)","export const ADD_ATTACHMENT = 'ADD_ATTACHMENT';\r\nexport const DELETE_ATTACHMENT = 'DELETE_ATTACHMENT';\r\nexport const WIPE_ATTACHMENTS = 'WIPE_ATTACHMENTS';\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\r\nexport const UPDATE_STATUS = 'UPDATE_STATE';","// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (file) => {\r\n    const validTypes = [\r\n        'image/jpeg',\r\n        'image/jpg',\r\n        'image/png',\r\n        'image/gif',\r\n        'application/msword',\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n        'application/vnd.ms-excel',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n        'application/pdf',\r\n        'application/zip'\r\n    ];\r\n    return validTypes.indexOf(file.type) !== -1 && file.size <= 5242880;\r\n}","import React from 'react';\r\nimport './index.css';\r\nimport {ADD_ATTACHMENT, DELETE_ATTACHMENT} from \"../../../constants/actionTypes\";\r\nimport {connect} from \"react-redux\";\r\nimport validateFile from \"../../../utils/validateFile\";\r\n\r\nconst addAttachment = (attachment) => ({type: ADD_ATTACHMENT, payload: attachment});\r\nconst deleteAttachment = (attachment) => ({type: DELETE_ATTACHMENT, payload: attachment});\r\n\r\nclass Attachments extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleAttach = this.handleAttach.bind(this);\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n    }\r\n\r\n    handleAttach(e) {\r\n        const attachment = e.target.files[0];\r\n        if (validateFile(attachment)) {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(attachment);\r\n            reader.onload = () => {\r\n                this.props.addAttachmentAction({\r\n                    'name': attachment.name,\r\n                    'content': reader.result,\r\n                    'encoding': 'base64'\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    handleDelete(attachment) {\r\n        this.props.deleteAttachmentAction(attachment);\r\n    }\r\n\r\n    render() {\r\n        const attachments = this.props.attaches.map(item => (\r\n            <li key={item.name} className=\"attachment\">\r\n                <div className=\"attachment__name\">\r\n                    {item.name}\r\n                </div>\r\n                <button type=\"button\" className=\"btn-delete\" onClick={() => this.handleDelete(item)}>Удалить</button>\r\n            </li>));\r\n        return (\r\n            <>\r\n                {attachments.length !== 0 && <ul className=\"attachments\">{attachments}</ul>}\r\n                <label htmlFor=\"file-input\" className=\"file-label\">Прикрепить файл\r\n                    <input id=\"file-input\" type=\"file\" onChange={this.handleAttach}/>\r\n                </label>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.attachment}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addAttachmentAction: attachment => dispatch(addAttachment(attachment)),\r\n        deleteAttachmentAction: attachment => dispatch(deleteAttachment(attachment))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Attachments);","import React from 'react';\r\nimport './index.css';\r\nimport {ADD_ATTACHMENT} from \"../../../constants/actionTypes\";\r\nimport {connect} from \"react-redux\";\r\nimport validateFile from \"../../../utils/validateFile\";\r\n\r\nconst addAttachment = (attachment) => ({type: ADD_ATTACHMENT, payload: attachment});\r\n\r\nclass DragZone extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            hidden: true\r\n        }\r\n        this.dragEnter = this.dragEnter.bind(this);\r\n        this.dragOver = this.dragOver.bind(this);\r\n        this.dragLeave = this.dragLeave.bind(this);\r\n        this.fileDrop = this.fileDrop.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const parent = document.getElementById('drop-container').parentElement;\r\n        parent.addEventListener('dragenter', this.dragEnter);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const parent = document.getElementById('drop-container').parentElement;\r\n        parent.removeEventListener('dragenter', this.dragEnter);\r\n    }\r\n\r\n    dragEnter(e) {\r\n        e.preventDefault();\r\n        this.setState({\r\n            hidden: false\r\n        });\r\n    }\r\n\r\n    dragOver(e) {\r\n        e.preventDefault();\r\n    }\r\n\r\n    dragLeave(e) {\r\n        e.preventDefault();\r\n        this.setState({\r\n            hidden: true\r\n        });\r\n    }\r\n\r\n    fileDrop(e) {\r\n        e.preventDefault();\r\n        const attachment = e.dataTransfer.files[0];\r\n        if (attachment && validateFile(attachment)) {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(attachment);\r\n            reader.onload = () => {\r\n                this.props.addAttachmentAction({\r\n                    'name': attachment.name,\r\n                    'content': reader.result,\r\n                    'encoding': 'base64'\r\n                });\r\n            }\r\n        }\r\n        this.setState({\r\n            hidden: true\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id=\"drop-container\" className={`drop-container ${this.state.hidden ? 'hidden' : ''}`}\r\n                     onDragOver={this.dragOver} onDragLeave={this.dragLeave} onDrop={this.fileDrop}>\r\n                    <div className=\"drop-message\">\r\n                        <p>Бросайте файлы сюда, я ловлю</p>\r\n                        <p>Мы принимаем картинки (jpg, png, gif), офисные файлы (doc, xls, pdf) и zip-архивы. Размеры\r\n                            файла до 5 МБ</p>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.attachment}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addAttachmentAction: attachment => dispatch(addAttachment(attachment))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DragZone);","const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nconst validate = values => {\r\n    const errors = {};\r\n    if (!values['fromName']) {\r\n        errors['fromName'] = 'Имя не может быть пустым';\r\n    }\r\n    if (!emailRegex.test(values['fromEmail'])) {\r\n        errors['fromEmail'] = 'Неверный формат Email';\r\n    }\r\n    if (!values['fromEmail']) {\r\n        errors['fromEmail'] = 'Email не может быть пустым';\r\n    }\r\n    if (!values['toName']) {\r\n        errors['toName'] = 'Имя не может быть пустым';\r\n    }\r\n    if (!emailRegex.test(values['mca'])) {\r\n        errors['mca'] = 'Неверный формат Email';\r\n    }\r\n    if (!values['mca']) {\r\n        errors['mca'] = 'Email не может быть пустым';\r\n    }\r\n    if (!values['subject']) {\r\n        errors['subject'] = 'Тема не может быть пустой';\r\n    }\r\n    if (!values['message']) {\r\n        errors['message'] = 'Сообщение не может быть пустым';\r\n    }\r\n\r\n    return errors;\r\n};\r\n\r\nexport default validate;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport {renderField} from \"./Field\";\r\nimport Attachments from \"./Attachments\";\r\nimport DragZone from \"./DragZone\";\r\nimport {Field, Form} from 'react-final-form'\r\nimport validate from \"./validate\";\r\nimport {WIPE_ATTACHMENTS} from \"../../constants/actionTypes\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst wipeAttachments = () => ({type: WIPE_ATTACHMENTS, payload: {}});\r\n\r\nfunction SendingForm(props) {\r\n    const {handleSubmit} = props;\r\n    return (\r\n        <Form onSubmit={handleSubmit} validate={validate}\r\n              render={({handleSubmit, form, submitting, pristine, values}) => (\r\n                  <form className=\"sending-form\" onSubmit={event => {handleSubmit(event).then(() => {form.restart(); props.wipeAttachmentsAction();})}}>\r\n                      <h1>Отправлялка сообщений</h1>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"fromName\" tag=\"input\" component={renderField} label=\"От кого\" placeholder=\"Имя\"\r\n                                 position=\"input-group__field_left\"/>\r\n                          <Field name=\"fromEmail\" tag=\"input\" component={renderField} placeholder=\"Email\"\r\n                                 position=\"input-group__field_right\"/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"toName\" tag=\"input\" component={renderField} label=\"Кому\" placeholder=\"Имя\"\r\n                                 position=\"input-group__field_left\"/>\r\n                          <Field name=\"mca\" tag=\"input\" component={renderField} placeholder=\"Email\"\r\n                                 position=\"input-group__field_right\"/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"subject\" tag=\"input\" component={renderField} label=\"Тема письма\"/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"message\" tag=\"textarea\" component={renderField} label=\"Сообщение\"/>\r\n                      </div>\r\n                      <div className=\"input-field input-field_column\">\r\n                          <Attachments/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <button type=\"submit\" className=\"btn-send\">Отправить</button>\r\n                      </div>\r\n                      <DragZone/>\r\n                  </form>\r\n              )}/>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        wipeAttachmentsAction: () => dispatch(wipeAttachments())\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(SendingForm);","import React from 'react';\r\nimport './index.css';\r\nimport {connect} from \"react-redux\";\r\n\r\nclass Messages extends React.Component {\r\n    // eslint-disable-next-line no-useless-constructor\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    render() {\r\n        const messages = this.props.messages.map(item => (\r\n            <tr className=\"messages-table__tr\" key={item.trackId}>\r\n                <td className=\"messages-table__td\">{item.date.toDateString()}</td>\r\n                <td className=\"messages-table__td\">{item.subject}</td>\r\n                <td className={`messages-table__td\r\n                ${\r\n                    item.status === 'Отправлено'\r\n                        ? 'messages-table__td_sent'\r\n                        : item.status === 'В очереди'\r\n                        ? 'messages-table__td_queue'\r\n                        : 'messages-table__td_error'\r\n                }`}>\r\n                    {item.status}\r\n                </td>\r\n            </tr>\r\n        ));\r\n        const table = (\r\n            <table className=\"messages-table\">\r\n                <thead className=\"messages-table__head\">\r\n                <tr className=\"messages-table__tr\">\r\n                    <th className=\"messages-table__th\">Дата</th>\r\n                    <th className=\"messages-table__th\">Тема</th>\r\n                    <th className=\"messages-table__th\">Статус</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {messages}\r\n                </tbody>\r\n            </table>\r\n        );\r\n        return (\r\n            <div className=\"messages\">\r\n                <h2>Отправленные сообщения</h2>\r\n\r\n                {messages.length === 0 ? <div>Сообщения ещё не отправлялись</div> : table}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.message}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Messages);","export default __webpack_public_path__ + \"static/media/logo.61ec3b45.svg\";","import Sendsay from \"sendsay-api\";\r\n\r\nconst sendsay = new Sendsay({apiKey: '19G37aBHzIr26V1NWF5kkqaVBguhD60740UgZmn_jXsLQrNuQkbPr79DPCqCu-5T2lBk5se4482wicksEcxteDx7M'});\r\n\r\nexport const issueSendTest = async (fields, attaches) => {\r\n    const requestBody = {\r\n        'action': 'issue.send.test',\r\n        'letter': {\r\n            'subject': fields['subject'],\r\n            'from.name': fields['fromName'],\r\n            'from.email': fields['fromEmail'],\r\n            'to.name': fields['toName'],\r\n            'message': {'text': fields['message']},\r\n            'attaches': attaches\r\n        },\r\n        'sendwhen': 'test',\r\n        'mca': [\r\n            fields['mca']\r\n        ]\r\n    }\r\n    console.log(requestBody);\r\n    const response = await sendsay.request(requestBody);\r\n    return response;\r\n}\r\n\r\nexport const trackGet = async (trackId) => {\r\n    const requestBody = {\r\n        'action': 'track.get',\r\n        'id': trackId\r\n    }\r\n    const response = await sendsay.request(requestBody);\r\n    if (response.obj['status'] > -1) {\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        return await trackGet(trackId);\r\n    } else {\r\n        return response;\r\n    }\r\n}","import React from 'react';\r\nimport './index.css';\r\nimport SendingForm from \"../SendingForm\";\r\nimport Messages from \"../Messages\";\r\nimport logo from \"./logo.svg\"\r\nimport {ADD_MESSAGE, UPDATE_STATUS} from \"../../constants/actionTypes\";\r\nimport {issueSendTest, trackGet} from \"../../services/sendsayAPI\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst addMessage = (message) => ({type: ADD_MESSAGE, payload: message});\r\nconst updateStatus = (status) => ({type: UPDATE_STATUS, payload: status});\r\n\r\nclass App extends React.Component {\r\n    // eslint-disable-next-line no-useless-constructor\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleSubmit = async (fields) => {\r\n        const {attaches} = this.props;\r\n        issueSendTest(fields, attaches).then(data => {\r\n            const trackId = data['track.id'];\r\n            this.props.addMessageAction({\r\n                'date': new Date(),\r\n                'subject': fields['subject'],\r\n                'status': 'В очереди',\r\n                'trackId': trackId\r\n            });\r\n            trackGet(trackId).then(data => {\r\n                this.props.updateStatusAction({\r\n                    'trackId': trackId,\r\n                    'status': data.obj['status'] === '-1' ? 'Отправлено' : 'Ошибка'\r\n                })\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"App\">\r\n                <img className=\"logo\" src={logo} alt=\"logo\"/>\r\n                <SendingForm handleSubmit={this.handleSubmit}/>\r\n                <Messages/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.attachment}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addMessageAction: message => dispatch(addMessage(message)),\r\n        updateStatusAction: status => dispatch(updateStatus(status))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n            getCLS(onPerfEntry);\n            getFID(onPerfEntry);\n            getFCP(onPerfEntry);\n            getLCP(onPerfEntry);\n            getTTFB(onPerfEntry);\n        });\n    }\n};\n\nexport default reportWebVitals;\n","import {combineReducers} from \"redux\";\r\nimport message from \"./reducers/message\";\r\nimport attachment from \"./reducers/attachment\";\r\n\r\nexport default combineReducers({attachment, message});","import {ADD_ATTACHMENT, DELETE_ATTACHMENT, WIPE_ATTACHMENTS} from \"../constants/actionTypes\";\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (state = {\r\n    'attaches': []\r\n}, action) => {\r\n    switch (action.type) {\r\n        case ADD_ATTACHMENT:\r\n            return {\r\n                'attaches': [...state.attaches, action.payload]\r\n            }\r\n        case DELETE_ATTACHMENT:\r\n            return {\r\n                ...state,\r\n                'attaches': [...state.attaches.filter(item => item !== action.payload)]\r\n            }\r\n        case WIPE_ATTACHMENTS:\r\n            return {\r\n                'attaches': []\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import {ADD_MESSAGE, UPDATE_STATUS} from \"../constants/actionTypes\";\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (state = {messages: []}, action) => {\r\n    switch (action.type) {\r\n        case ADD_MESSAGE:\r\n            return {\r\n                messages: [...state.messages, action.payload]\r\n            }\r\n        case UPDATE_STATUS:\r\n            return {\r\n                messages: state.messages.map(item => item.trackId === action.payload.trackId ? {\r\n                    ...item,\r\n                    'status': action.payload.status\r\n                } : item)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import {createStore} from \"redux\";\r\nimport reducer from \"./reducer\";\r\n\r\nexport const store = createStore(reducer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./store\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}