{"version":3,"sources":["components/SendingForm/Field/index.js","constants/actionTypes.js","action_creators/attachment.js","utils/validateFile.js","components/SendingForm/Attachments/index.js","components/SendingForm/DragZone/index.js","components/SendingForm/validate.js","components/SendingForm/index.js","components/Messages/index.js","components/App/logo.svg","services/sendsayAPI.js","components/App/index.js","action_creators/message.js","reportWebVitals.js","reducer.js","reducers/attachment.js","reducers/message.js","store.js","index.js"],"names":["renderField","input","tag","label","placeholder","position","meta","asyncValidating","touched","error","className","rows","ADD_ATTACHMENT","DELETE_ATTACHMENT","ATTACHMENT_ERROR","WIPE_ATTACHMENTS","ADD_MESSAGE","UPDATE_STATUS","addAttachment","attachment","type","payload","updateAttachmentError","file","indexOf","value","size","connect","state","dispatch","addAttachmentAction","deleteAttachmentAction","deleteAttachment","attachmentErrorAction","props","attachments","attaches","map","item","name","onClick","length","htmlFor","id","onChange","e","target","files","validate","validateFile","reader","FileReader","readAsDataURL","onload","result","DragZone","hidden","dragEnter","bind","dragOver","dragLeave","fileDrop","document","getElementById","parentElement","addEventListener","this","removeEventListener","preventDefault","setState","dataTransfer","updateAttachmentErrorAction","onDragOver","onDragLeave","onDrop","React","Component","emailRegex","values","errors","test","wipeAttachmentsAction","handleSubmit","onSubmit","render","form","submitting","pristine","event","then","restart","component","Messages","messages","date","toDateString","subject","status","trackId","table","message","sendsay","Sendsay","apiKey","issueSendTest","fields","a","requestBody","console","log","request","response","trackGet","obj","Promise","resolve","setTimeout","App","data","addMessageAction","Date","updateStatusAction","src","logo","alt","addMessage","updateStatus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","combineReducers","action","filter","store","createStore","reducer","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.fae3913e.chunk.js","sourcesContent":["import React from 'react';\r\nimport './index.css';\r\n\r\nexport const renderField = (\r\n    {input, tag, label, placeholder, position, meta: {asyncValidating, touched, error}}\r\n) => (\r\n    <div className=\"input-group\">\r\n        <label className=\"input-group__label\">{label}</label>\r\n        <div className={asyncValidating ? 'async-validating' : ''}>\r\n            {tag === 'input'\r\n                ? <input {...input} placeholder={placeholder}\r\n                         className={`input-group__field input-group__field_input ${position ? position : ''}`}/>\r\n                : <textarea {...input} placeholder={placeholder}\r\n                            className={`input-group__field input-group__field_textarea ${position ? position : ''}`}\r\n                            rows=\"3\"/>\r\n            }\r\n            {touched && error && <span className=\"input-group__error\">{error}</span>}\r\n        </div>\r\n    </div>\r\n)","export const ADD_ATTACHMENT = 'ADD_ATTACHMENT';\r\nexport const DELETE_ATTACHMENT = 'DELETE_ATTACHMENT';\r\nexport const ATTACHMENT_ERROR = 'ATTACHMENT_ERROR';\r\nexport const WIPE_ATTACHMENTS = 'WIPE_ATTACHMENTS';\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\r\nexport const UPDATE_STATUS = 'UPDATE_STATE';","import {ADD_ATTACHMENT, ATTACHMENT_ERROR, DELETE_ATTACHMENT} from \"../constants/actionTypes\";\r\n\r\nexport const addAttachment = (attachment) => ({type: ADD_ATTACHMENT, payload: attachment});\r\nexport const deleteAttachment = (attachment) => ({type: DELETE_ATTACHMENT, payload: attachment});\r\nexport const updateAttachmentError = (error) => ({type: ATTACHMENT_ERROR, payload: error});","// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (file) => {\r\n    const validTypes = [\r\n        'image/jpeg',\r\n        'image/jpg',\r\n        'image/png',\r\n        'image/gif',\r\n        'application/msword',\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n        'application/vnd.ms-excel',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n        'application/pdf',\r\n        'application/zip'\r\n    ];\r\n    if (validTypes.indexOf(file.type) === -1) {\r\n        return {value: false, error: 'Недопустимый тип файла'}\r\n    }\r\n    if (file.size > 5242880) {\r\n        return {value: false, error: 'Превышен допустимый размер (5 МБ)'}\r\n    }\r\n    return {value: true, error: ''};\r\n}","import React from 'react';\r\nimport './index.css';\r\nimport {connect} from \"react-redux\";\r\nimport {addAttachment, deleteAttachment, updateAttachmentError} from \"../../../action_creators/attachment\";\r\nimport validateFile from \"../../../utils/validateFile\";\r\n\r\n\r\nfunction Attachments(props) {\r\n    const handleAttach = (e) => {\r\n        const attachment = e.target.files[0];\r\n        const validate = validateFile(attachment);\r\n        if (validate.value) {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(attachment);\r\n            reader.onload = () => {\r\n                props.addAttachmentAction({\r\n                    'name': attachment.name,\r\n                    'content': reader.result,\r\n                    'encoding': 'base64'\r\n                });\r\n            }\r\n        }\r\n        props.attachmentErrorAction(validate.error);\r\n    }\r\n\r\n    const handleDelete = (attachment) => {\r\n        props.deleteAttachmentAction(attachment);\r\n    }\r\n\r\n    const attachments = props.attaches.map(item => (\r\n        <li key={item.name} className=\"attachment\">\r\n            <div className=\"attachment__name\">\r\n                {item.name}\r\n            </div>\r\n            <button type=\"button\" className=\"btn-delete\" onClick={() => handleDelete(item)}>Удалить</button>\r\n        </li>));\r\n    return (\r\n        <>\r\n            {attachments.length !== 0 && <ul className=\"attachments\">{attachments}</ul>}\r\n            <div className=\"file\">\r\n                <label htmlFor=\"file__input\" className=\"file__label\">Прикрепить файл\r\n                    <input id=\"file__input\" type=\"file\" onChange={handleAttach}/>\r\n                </label>\r\n                {props.error && <span className=\"file__error\">{props.error}</span>}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.attachment}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addAttachmentAction: attachment => dispatch(addAttachment(attachment)),\r\n        deleteAttachmentAction: attachment => dispatch(deleteAttachment(attachment)),\r\n        attachmentErrorAction: error => dispatch(updateAttachmentError(error))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Attachments);","import React from 'react';\r\nimport './index.css';\r\nimport {connect} from \"react-redux\";\r\nimport validateFile from \"../../../utils/validateFile\";\r\nimport {addAttachment, updateAttachmentError} from \"../../../action_creators/attachment\";\r\n\r\nclass DragZone extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            hidden: true\r\n        }\r\n        this.dragEnter = this.dragEnter.bind(this);\r\n        this.dragOver = this.dragOver.bind(this);\r\n        this.dragLeave = this.dragLeave.bind(this);\r\n        this.fileDrop = this.fileDrop.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const parent = document.getElementById('drop-container').parentElement;\r\n        parent.addEventListener('dragenter', this.dragEnter);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const parent = document.getElementById('drop-container').parentElement;\r\n        parent.removeEventListener('dragenter', this.dragEnter);\r\n    }\r\n\r\n    dragEnter(e) {\r\n        e.preventDefault();\r\n        this.setState({\r\n            hidden: false\r\n        });\r\n    }\r\n\r\n    dragOver(e) {\r\n        e.preventDefault();\r\n    }\r\n\r\n    dragLeave(e) {\r\n        e.preventDefault();\r\n        this.setState({\r\n            hidden: true\r\n        });\r\n    }\r\n\r\n    fileDrop(e) {\r\n        e.preventDefault();\r\n        const attachment = e.dataTransfer.files[0];\r\n        const validate = validateFile(attachment);\r\n        if (attachment && validate.value) {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(attachment);\r\n            reader.onload = () => {\r\n                this.props.addAttachmentAction({\r\n                    'name': attachment.name,\r\n                    'content': reader.result,\r\n                    'encoding': 'base64'\r\n                });\r\n            }\r\n        }\r\n        this.props.updateAttachmentErrorAction(validate.error);\r\n        this.setState({\r\n            hidden: true\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id=\"drop-container\" className={`drop-container ${this.state.hidden ? 'hidden' : ''}`}\r\n                     onDragOver={this.dragOver} onDragLeave={this.dragLeave} onDrop={this.fileDrop}>\r\n                    <div className=\"drop-message\">\r\n                        <p>Бросайте файлы сюда, я ловлю</p>\r\n                        <p>Мы принимаем картинки (jpg, png, gif), офисные файлы (doc, xls, pdf) и zip-архивы. Размеры\r\n                            файла до 5 МБ</p>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.attachment}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addAttachmentAction: attachment => dispatch(addAttachment(attachment)),\r\n        updateAttachmentErrorAction: error => dispatch(updateAttachmentError(error))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DragZone);","const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nconst validate = values => {\r\n    const errors = {};\r\n    if (!values['fromName']) {\r\n        errors['fromName'] = 'Имя не может быть пустым';\r\n    }\r\n    if (!emailRegex.test(values['fromEmail'])) {\r\n        errors['fromEmail'] = 'Неверный формат Email';\r\n    }\r\n    if (!values['fromEmail']) {\r\n        errors['fromEmail'] = 'Email не может быть пустым';\r\n    }\r\n    if (!values['toName']) {\r\n        errors['toName'] = 'Имя не может быть пустым';\r\n    }\r\n    if (!emailRegex.test(values['mca'])) {\r\n        errors['mca'] = 'Неверный формат Email';\r\n    }\r\n    if (!values['mca']) {\r\n        errors['mca'] = 'Email не может быть пустым';\r\n    }\r\n    if (!values['subject']) {\r\n        errors['subject'] = 'Тема не может быть пустой';\r\n    }\r\n    if (!values['message']) {\r\n        errors['message'] = 'Сообщение не может быть пустым';\r\n    }\r\n\r\n    return errors;\r\n};\r\n\r\nexport default validate;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport {renderField} from \"./Field\";\r\nimport Attachments from \"./Attachments\";\r\nimport DragZone from \"./DragZone\";\r\nimport {Field, Form} from 'react-final-form'\r\nimport validate from \"./validate\";\r\nimport {WIPE_ATTACHMENTS} from \"../../constants/actionTypes\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst wipeAttachments = () => ({type: WIPE_ATTACHMENTS, payload: {}});\r\n\r\nfunction SendingForm(props) {\r\n    const {handleSubmit} = props;\r\n    return (\r\n        <Form onSubmit={handleSubmit} validate={validate}\r\n              render={({handleSubmit, form, submitting, pristine, values}) => (\r\n                  <form className=\"sending-form\" onSubmit={event => {handleSubmit(event).then(() => {form.restart(); props.wipeAttachmentsAction();})}}>\r\n                      <h1>Отправлялка сообщений</h1>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"fromName\" tag=\"input\" component={renderField} label=\"От кого\" placeholder=\"Имя\"\r\n                                 position=\"input-group__field_left\"/>\r\n                          <Field name=\"fromEmail\" tag=\"input\" component={renderField} placeholder=\"Email\"\r\n                                 position=\"input-group__field_right\"/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"toName\" tag=\"input\" component={renderField} label=\"Кому\" placeholder=\"Имя\"\r\n                                 position=\"input-group__field_left\"/>\r\n                          <Field name=\"mca\" tag=\"input\" component={renderField} placeholder=\"Email\"\r\n                                 position=\"input-group__field_right\"/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"subject\" tag=\"input\" component={renderField} label=\"Тема письма\"/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <Field name=\"message\" tag=\"textarea\" component={renderField} label=\"Сообщение\"/>\r\n                      </div>\r\n                      <div className=\"input-field input-field_column\">\r\n                          <Attachments/>\r\n                      </div>\r\n                      <div className=\"input-field\">\r\n                          <button type=\"submit\" className=\"btn-send\">Отправить</button>\r\n                      </div>\r\n                      <DragZone/>\r\n                  </form>\r\n              )}/>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        wipeAttachmentsAction: () => dispatch(wipeAttachments())\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(SendingForm);","import React from 'react';\r\nimport './index.css';\r\nimport {connect} from \"react-redux\";\r\n\r\nclass Messages extends React.Component {\r\n    // eslint-disable-next-line no-useless-constructor\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    render() {\r\n        const messages = this.props.messages.map(item => (\r\n            <tr className=\"messages-table__tr\" key={item.trackId}>\r\n                <td className=\"messages-table__td\">{item.date.toDateString()}</td>\r\n                <td className=\"messages-table__td\">{item.subject}</td>\r\n                <td className={`messages-table__td\r\n                ${\r\n                    item.status === 'Отправлено'\r\n                        ? 'messages-table__td_sent'\r\n                        : item.status === 'В очереди'\r\n                        ? 'messages-table__td_queue'\r\n                        : 'messages-table__td_error'\r\n                }`}>\r\n                    {item.status}\r\n                </td>\r\n            </tr>\r\n        ));\r\n        const table = (\r\n            <table className=\"messages-table\">\r\n                <thead className=\"messages-table__head\">\r\n                <tr className=\"messages-table__tr\">\r\n                    <th className=\"messages-table__th\">Дата</th>\r\n                    <th className=\"messages-table__th\">Тема</th>\r\n                    <th className=\"messages-table__th\">Статус</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {messages}\r\n                </tbody>\r\n            </table>\r\n        );\r\n        return (\r\n            <div className=\"messages\">\r\n                <h2>Отправленные сообщения</h2>\r\n\r\n                {messages.length === 0 ? <div>Сообщения ещё не отправлялись</div> : table}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.message}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Messages);","export default __webpack_public_path__ + \"static/media/logo.61ec3b45.svg\";","import Sendsay from \"sendsay-api\";\r\n\r\nconst sendsay = new Sendsay({apiKey: '19G37aBHzIr26V1NWF5kkqaVBguhD60740UgZmn_jXsLQrNuQkbPr79DPCqCu-5T2lBk5se4482wicksEcxteDx7M'});\r\n\r\nexport const issueSendTest = async (fields, attaches) => {\r\n    const requestBody = {\r\n        'action': 'issue.send.test',\r\n        'letter': {\r\n            'subject': fields['subject'],\r\n            'from.name': fields['fromName'],\r\n            'from.email': fields['fromEmail'],\r\n            'to.name': fields['toName'],\r\n            'message': {'text': fields['message']},\r\n            'attaches': attaches\r\n        },\r\n        'sendwhen': 'test',\r\n        'mca': [\r\n            fields['mca']\r\n        ]\r\n    }\r\n    console.log(requestBody);\r\n    const response = await sendsay.request(requestBody);\r\n    return response;\r\n}\r\n\r\nexport const trackGet = async (trackId) => {\r\n    const requestBody = {\r\n        'action': 'track.get',\r\n        'id': trackId\r\n    }\r\n    const response = await sendsay.request(requestBody);\r\n    if (response.obj['status'] > -1) {\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        return await trackGet(trackId);\r\n    } else {\r\n        return response;\r\n    }\r\n}","import React from 'react';\r\nimport './index.css';\r\nimport SendingForm from \"../SendingForm\";\r\nimport Messages from \"../Messages\";\r\nimport logo from \"./logo.svg\"\r\nimport {issueSendTest, trackGet} from \"../../services/sendsayAPI\";\r\nimport {connect} from \"react-redux\";\r\nimport {addMessage, updateStatus} from \"../../action_creators/message\";\r\n\r\nclass App extends React.Component {\r\n    // eslint-disable-next-line no-useless-constructor\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleSubmit = async (fields) => {\r\n        const {attaches} = this.props;\r\n        issueSendTest(fields, attaches).then(data => {\r\n            const trackId = data['track.id'];\r\n            this.props.addMessageAction({\r\n                'date': new Date(),\r\n                'subject': fields['subject'],\r\n                'status': 'В очереди',\r\n                'trackId': trackId\r\n            });\r\n            trackGet(trackId).then(data => {\r\n                this.props.updateStatusAction({\r\n                    'trackId': trackId,\r\n                    'status': data.obj['status'] === '-1' ? 'Отправлено' : 'Ошибка'\r\n                })\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"App\">\r\n                <img className=\"logo\" src={logo} alt=\"logo\"/>\r\n                <SendingForm handleSubmit={this.handleSubmit}/>\r\n                <Messages/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {...state.attachment}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addMessageAction: message => dispatch(addMessage(message)),\r\n        updateStatusAction: status => dispatch(updateStatus(status))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import {ADD_MESSAGE, UPDATE_STATUS} from \"../constants/actionTypes\";\r\n\r\nexport const addMessage = (message) => ({type: ADD_MESSAGE, payload: message});\r\nexport const updateStatus = (status) => ({type: UPDATE_STATUS, payload: status});","const reportWebVitals = onPerfEntry => {\r\n    if (onPerfEntry && onPerfEntry instanceof Function) {\r\n        import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\r\n            getCLS(onPerfEntry);\r\n            getFID(onPerfEntry);\r\n            getFCP(onPerfEntry);\r\n            getLCP(onPerfEntry);\r\n            getTTFB(onPerfEntry);\r\n        });\r\n    }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {combineReducers} from \"redux\";\r\nimport message from \"./reducers/message\";\r\nimport attachment from \"./reducers/attachment\";\r\n\r\nexport default combineReducers({attachment, message});","import {ADD_ATTACHMENT, DELETE_ATTACHMENT, WIPE_ATTACHMENTS, ATTACHMENT_ERROR} from \"../constants/actionTypes\";\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (state = {\r\n    'attaches': [],\r\n    'error': ''\r\n}, action) => {\r\n    switch (action.type) {\r\n        case ADD_ATTACHMENT:\r\n            return {\r\n                ...state,\r\n                'attaches': [...state.attaches, action.payload]\r\n            }\r\n        case DELETE_ATTACHMENT:\r\n            return {\r\n                ...state,\r\n                'attaches': [...state.attaches.filter(item => item !== action.payload)]\r\n            }\r\n        case WIPE_ATTACHMENTS:\r\n            return {\r\n                'attaches': [],\r\n                'error': ''\r\n            }\r\n        case ATTACHMENT_ERROR:\r\n            return {\r\n                ...state,\r\n                'error': action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import {ADD_MESSAGE, UPDATE_STATUS} from \"../constants/actionTypes\";\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (state = {messages: []}, action) => {\r\n    switch (action.type) {\r\n        case ADD_MESSAGE:\r\n            return {\r\n                messages: [...state.messages, action.payload]\r\n            }\r\n        case UPDATE_STATUS:\r\n            return {\r\n                messages: state.messages.map(item => item.trackId === action.payload.trackId ? {\r\n                    ...item,\r\n                    'status': action.payload.status\r\n                } : item)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import {createStore} from \"redux\";\r\nimport reducer from \"./reducer\";\r\n\r\nexport const store = createStore(reducer);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {Provider} from \"react-redux\";\r\nimport {store} from \"./store\";\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Provider store={store}>\r\n            <App/>\r\n        </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}